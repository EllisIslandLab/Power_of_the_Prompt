â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    /GET-STARTED FLOW - VISUAL OVERVIEW                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CURRENT STATE (BROKEN):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

User visits /get-started
          â†“
    [SPINNER]  â† ThreeRoundFlow component missing
          â†“
   (Waits forever)


AFTER IMPLEMENTATION (WORKING):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /get-started                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚  Build Your Custom Website In 3 Simple Rounds                             â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  [ThreeRoundFlow Component]                                              â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  ğŸ“ ROUND 1/3: BUSINESS INFO                                            â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚ â”‚  â”‚ Email: [________________]                      â”‚                     â”‚
â”‚ â”‚  â”‚ Business Name: [________________]              â”‚                     â”‚
â”‚ â”‚  â”‚ Description: [________________________]         â”‚                     â”‚
â”‚ â”‚  â”‚ Target Audience: [________________]            â”‚                     â”‚
â”‚ â”‚  â”‚ Primary Color: [Color Picker]                  â”‚                     â”‚
â”‚ â”‚  â”‚ Secondary Color: [Color Picker]                â”‚                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚ â”‚                                [Previous] [Next â–¶]                       â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ (1/3)                                                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                 [Submit]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ POST /api/save-rounds
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /get-started/verify/[projectId]                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚  âœ‰ï¸ Check your email for a 6-digit code                                 â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  Code sent to: user@example.com                                          â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  Enter code: [_][_][_][_][_][_]                                         â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  â±ï¸ Code expires in: 9:45                                               â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  [Resend Code] (remaining: 2)                                            â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  Already verified? [Continue]                                            â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ POST /api/ai/verify-code
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /get-started/deep-dive/[projectId]                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚  Optional: Tell us more for better results                               â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  ğŸ¯ Target Audience:                                                     â”‚
â”‚ â”‚  [________________________________]                                      â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  ğŸ˜ Business Pain Points:                                               â”‚
â”‚ â”‚  [________________________________]                                      â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  â­ Unique Value Proposition:                                            â”‚
â”‚ â”‚  [________________________________]                                      â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  ğŸ† Competitive Advantage:                                              â”‚
â”‚ â”‚  [________________________________]                                      â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚                              [Skip] [Generate Preview â–¶]                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ POST /api/ai/generate-preview
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /get-started/preview/[projectId]                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   Website Preview        â”‚  Customize with AI - $5                    â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚  â”‚                      â”‚ â”‚  â€¢ 3 AI refinements                           â”‚
â”‚ â”‚  â”‚  [Website Preview]   â”‚ â”‚  â€¢ Change any section                        â”‚
â”‚ â”‚  â”‚                      â”‚ â”‚  â€¢ Rewrite content                           â”‚
â”‚ â”‚  â”‚                      â”‚ â”‚  â€¢ Adjust colors & fonts                     â”‚
â”‚ â”‚  â”‚                      â”‚ â”‚  â€¢ Add/remove sections                       â”‚
â”‚ â”‚  â”‚                      â”‚ â”‚  [Customize Now]                             â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                              â”‚
â”‚ â”‚                           â”‚  Foundation Course - $799                    â”‚
â”‚ â”‚                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”‚                           â”‚  â€¢ Production-ready code                       â”‚
â”‚ â”‚                           â”‚  â€¢ Supabase backend                           â”‚
â”‚ â”‚                           â”‚  â€¢ Stripe payments                            â”‚
â”‚ â”‚                           â”‚  â€¢ Complete docs                              â”‚
â”‚ â”‚                           â”‚  [Buy Course]                                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ Stripe Checkout
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /get-started/success?session_id=...                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚  âœ… Payment Successful!                                                  â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  Your website is ready to customize.                                     â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â”‚  [View My Website] [Download Code]                                       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


MISSING COMPONENTS STATUS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âŒ ThreeRoundFlow.tsx
   â””â”€ Blocks: EVERYTHING
   â””â”€ Time: 5 hours
   â””â”€ Priority: ğŸ”´ CRITICAL

âŒ /api/save-rounds
   â””â”€ Blocks: Data persistence
   â””â”€ Time: 2.5 hours
   â””â”€ Priority: ğŸ”´ CRITICAL

âŒ /get-started/verify page
   â””â”€ Blocks: UX clarity
   â””â”€ Time: 3.5 hours
   â””â”€ Priority: ğŸŸ  IMPORTANT

âŒ /get-started/deep-dive page
   â””â”€ Blocks: Quality improvement
   â””â”€ Time: 2.5 hours
   â””â”€ Priority: ğŸŸ¡ NICE-TO-HAVE


API CALL SEQUENCE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1ï¸âƒ£  GET /get-started
    â””â”€> Renders page with ThreeRoundFlow

2ï¸âƒ£  POST /api/save-rounds (after form submit)
    â”œâ”€> Input: all 3 rounds
    â”œâ”€> Save to: demo_projects + users
    â””â”€> Output: projectId, needsVerification

3ï¸âƒ£  POST /api/ai/send-verification-email (automatic)
    â”œâ”€> Input: email from round1
    â”œâ”€> Save to: Redis (Upstash)
    â””â”€> Send: 6-digit code via Resend

4ï¸âƒ£  POST /api/ai/verify-code (user enters code)
    â”œâ”€> Input: email, 6-digit code
    â”œâ”€> Check: Redis for match
    â””â”€> Update: users.free_tokens_claimed = true

5ï¸âƒ£  POST /api/ai/generate-preview (from deep-dive or direct)
    â”œâ”€> Input: email, all answers
    â”œâ”€> Call: Claude API (Haiku or Sonnet)
    â”œâ”€> Save: demo_projects.generated_components
    â””â”€> Update: users.free_tokens_used = true

6ï¸âƒ£  GET /get-started/preview/[projectId]
    â”œâ”€> Query: demo_projects by ID
    â”œâ”€> Check: AI premium status
    â””â”€> Render: PreviewFrame + UpgradePrompt

7ï¸âƒ£  POST /api/demo-generator/create-ai-checkout
    â”œâ”€> Input: projectId, tier ($5 or $799)
    â”œâ”€> Create: Stripe session
    â””â”€> Output: checkout URL

8ï¸âƒ£  Stripe Webhook â†’ Success
    â”œâ”€> Verify: payment confirmed
    â”œâ”€> Update: users, demo_projects
    â””â”€> Redirect: to /get-started/success


DATABASE TABLES INVOLVED:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

users
â”œâ”€ id (UUID)
â”œâ”€ email (text, unique)
â”œâ”€ free_tokens_claimed (boolean)
â”œâ”€ free_tokens_used (boolean)
â””â”€ created_at, updated_at

demo_projects
â”œâ”€ id (UUID)
â”œâ”€ user_email (text FK)
â”œâ”€ business_name (text)
â”œâ”€ metadata (JSONB) â† stores all 3 rounds
â”œâ”€ generated_components (JSONB)
â”œâ”€ theme_settings (JSONB)
â”œâ”€ status (text)
â””â”€ created_at, updated_at

website_categories
â”œâ”€ id (UUID)
â”œâ”€ name (text)
â”œâ”€ slug (text, unique)
â””â”€ is_active (boolean)

website_subcategories
â”œâ”€ id (UUID)
â”œâ”€ category_id (UUID FK)
â”œâ”€ name (text)
â””â”€ slug (text)


FORM VALIDATION:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Round 1:
â”œâ”€ Email: Must be valid email format
â”œâ”€ Business Name: 3-100 characters
â”œâ”€ Business Description: Optional
â”œâ”€ Target Audience: Optional
â””â”€ Colors: Valid hex colors

Round 2:
â”œâ”€ Category: Required, must exist in DB
â””â”€ Subcategory: Required if parent selected

Round 3:
â”œâ”€ Content Source: One of [upload, ai_placeholder, skip]
â””â”€ Files: Optional (only if upload selected)


TESTING CHECKLIST:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Basic Flow:
â–¡ Load /get-started â†’ see form (not spinner)
â–¡ Fill Round 1 â†’ next button works
â–¡ Fill Round 2 â†’ category loads from DB
â–¡ Fill Round 3 â†’ submit button appears
â–¡ Click submit â†’ loading state shows
â–¡ Check DB â†’ demo_projects created
â–¡ Check email â†’ code received
â–¡ Enter code â†’ auto-verify
â–¡ See preview â†’ generated website displays
â–¡ Click upgrade â†’ Stripe checkout loads
â–¡ Complete payment â†’ success page shows

Error Cases:
â–¡ Invalid email â†’ shows error
â–¡ Missing category â†’ prevents next
â–¡ Code expires â†’ resend works
â–¡ Wrong code 5x â†’ rate limited
â–¡ Network error â†’ retry shows

Edge Cases:
â–¡ Refresh page â†’ draft recovers from localStorage
â–¡ Multiple windows â†’ data stays in sync
â–¡ Mobile view â†’ form is usable
â–¡ Slow connection â†’ loading states show

